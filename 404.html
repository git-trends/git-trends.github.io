<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#0f1319" />
    <title>GitTrends - Discover Trending GitHub Repositories</title>
    <meta
      name="description"
      content="Explore the hottest open-source projects on GitHub. Track daily, weekly, and monthly trending repositories across all programming languages."
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
    />
    <link rel="stylesheet" href="./styles/styles.css" />
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-2R2CBNF8XD"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-2R2CBNF8XD");
    </script>
  </head>
  <body>
    <!-- Header -->
    <header class="site-header">
      <div class="header-inner">
        <a href="/" class="logo">
          <div class="logo-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
              <polyline points="16 7 22 7 22 13" />
            </svg>
          </div>
          <span class="logo-text">GitTrends</span>
        </a>
        <nav class="nav-desktop">
          <a href="/" class="nav-link active" data-nav="trending">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
              <polyline points="16 7 22 7 22 13" />
            </svg>
            Trending
          </a>
          <a href="/search" class="nav-link" data-nav="search">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8" />
              <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
            Search
          </a>
        </nav>
        <div class="header-right">
          <a
            href="https://github.com"
            target="_blank"
            rel="noopener noreferrer"
            class="github-link"
          >
            <svg fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"
              />
            </svg>
            <span class="sr-only">GitHub</span>
          </a>
          <button
            class="mobile-toggle"
            id="mobile-toggle"
            aria-label="Toggle navigation"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              id="menu-icon"
            >
              <line x1="4" y1="12" x2="20" y2="12" />
              <line x1="4" y1="6" x2="20" y2="6" />
              <line x1="4" y1="18" x2="20" y2="18" />
            </svg>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              id="close-icon"
              class="hidden"
            >
              <line x1="18" y1="6" x2="6" y2="18" />
              <line x1="6" y1="6" x2="18" y2="18" />
            </svg>
          </button>
        </div>
      </div>
      <div class="mobile-nav" id="mobile-nav">
        <a
          href="/"
          class="nav-link active"
          data-nav="trending"
          onclick="closeMobile()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
            <polyline points="16 7 22 7 22 13" />
          </svg>
          Trending
        </a>
        <a
          href="/search"
          class="nav-link"
          data-nav="search"
          onclick="closeMobile()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          Search
        </a>
        <a
          href="/about"
          class="nav-link"
          data-nav="about"
          onclick="closeMobile()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <circle cx="12" cy="12" r="10" />
            <line x1="12" y1="16" x2="12" y2="12" />
            <line x1="12" y1="8" x2="12.01" y2="8" />
          </svg>
          About
        </a>
        <a
          href="/privacy"
          class="nav-link"
          data-nav="privacy"
          onclick="closeMobile()"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" />
          </svg>
          Privacy
        </a>
      </div>
    </header>

    <!-- Main -->
    <div class="main-content">
      <div class="not-found">
        <div class="not-found-code">404</div>
        <h1 class="not-found-title">Page not found</h1>
        <p class="not-found-desc">
          The page you are looking for does not exist. It may have been moved or
          removed, or you may have mistyped the URL.
        </p>
        <a href="/" class="not-found-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" />
            <polyline points="9 22 9 12 15 12 15 22" />
          </svg>
          Back to Home
        </a>
        <div class="not-found-links">
          <a href="/search" class="not-found-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="11" cy="11" r="8" />
              <line x1="21" y1="21" x2="16.65" y2="16.65" />
            </svg>
            Search Repos
          </a>
          <a href="/" class="not-found-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <polyline points="22 7 13.5 15.5 8.5 10.5 2 17" />
              <polyline points="16 7 22 7 22 13" />
            </svg>
            Trending
          </a>
          <a href="/about" class="not-found-link">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10" />
              <line x1="12" y1="16" x2="12" y2="12" />
              <line x1="12" y1="8" x2="12.01" y2="8" />
            </svg>
            About
          </a>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="footer-inner">
        <span class="footer-text"
          >GitTrends - Not affiliated with GitHub, Inc.</span
        >
        <nav class="footer-nav">
          <a href="/about.html" class="footer-link">About</a>
          <a href="/privacy.html" class="footer-link">Privacy Policy</a>
          <a
            href="https://github.com"
            target="_blank"
            rel="noopener noreferrer"
            class="footer-link"
            >GitHub</a
          >
        </nav>
      </div>
    </footer>

    <!-- SVG Icons reused in JS -->
    <template id="icon-star">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polygon
          points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"
        />
      </svg>
    </template>
    <template id="icon-fork">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="18" r="3" />
        <circle cx="6" cy="6" r="3" />
        <circle cx="18" cy="6" r="3" />
        <path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9" />
        <path d="M12 12v3" />
      </svg>
    </template>
    <template id="icon-eye">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" />
        <circle cx="12" cy="12" r="3" />
      </svg>
    </template>
    <template id="icon-external">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
        <polyline points="15 3 21 3 21 9" />
        <line x1="10" y1="14" x2="21" y2="3" />
      </svg>
    </template>
    <template id="icon-chevron-left">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polyline points="15 18 9 12 15 6" />
      </svg>
    </template>
    <template id="icon-chevron-right">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <polyline points="9 18 15 12 9 6" />
      </svg>
    </template>
    <template id="icon-alert">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <circle cx="12" cy="12" r="10" />
        <line x1="12" y1="8" x2="12" y2="12" />
        <line x1="12" y1="16" x2="12.01" y2="16" />
      </svg>
    </template>

    <script>
      // ---- Data ----
      const LANGUAGES = [
        { value: "", label: "All Languages" },
        { value: "javascript", label: "JavaScript" },
        { value: "typescript", label: "TypeScript" },
        { value: "python", label: "Python" },
        { value: "java", label: "Java" },
        { value: "go", label: "Go" },
        { value: "rust", label: "Rust" },
        { value: "c++", label: "C++" },
        { value: "c", label: "C" },
        { value: "c#", label: "C#" },
        { value: "php", label: "PHP" },
        { value: "ruby", label: "Ruby" },
        { value: "swift", label: "Swift" },
        { value: "kotlin", label: "Kotlin" },
        { value: "dart", label: "Dart" },
        { value: "scala", label: "Scala" },
        { value: "shell", label: "Shell" },
        { value: "html", label: "HTML" },
        { value: "css", label: "CSS" },
        { value: "vue", label: "Vue" },
      ];

      const LANG_COLORS = {
        JavaScript: "#f1e05a",
        TypeScript: "#3178c6",
        Python: "#3572A5",
        Java: "#b07219",
        Go: "#00ADD8",
        Rust: "#dea584",
        "C++": "#f34b7d",
        C: "#555555",
        "C#": "#178600",
        PHP: "#4F5D95",
        Ruby: "#701516",
        Swift: "#F05138",
        Kotlin: "#A97BFF",
        Dart: "#00B4AB",
        Scala: "#c22d40",
        Shell: "#89e051",
        HTML: "#e34c26",
        CSS: "#563d7c",
        Vue: "#41b883",
        Jupyter_Notebook: "#DA5B0B",
        R: "#198CE7",
        Lua: "#000080",
        Elixir: "#6e4a7e",
        Haskell: "#5e5086",
        Zig: "#ec915c",
      };

      const SORT_OPTIONS = [
        { value: "stars", label: "Stars" },
        { value: "forks", label: "Forks" },
        { value: "updated", label: "Recently Updated" },
        { value: "help-wanted-issues", label: "Help Wanted" },
      ];

      // ---- Helpers ----
      function formatNum(n) {
        if (n >= 1000) return (n / 1000).toFixed(1) + "k";
        return String(n);
      }

      function getDateSince(range) {
        const d = new Date();
        if (range === "weekly") d.setDate(d.getDate() - 7);
        else if (range === "monthly") d.setMonth(d.getMonth() - 1);
        else d.setDate(d.getDate() - 1);
        return d.toISOString().split("T")[0];
      }

      function getIcon(id) {
        const tpl = document.getElementById(id);
        return tpl ? tpl.innerHTML : "";
      }

      function languageOptions() {
        return LANGUAGES.map(
          (l) => `<option value="${l.value}">${l.label}</option>`,
        ).join("");
      }

      function escapeHtml(s) {
        if (!s) return "";
        return s
          .replace(/&/g, "&amp;")
          .replace(/</g, "&lt;")
          .replace(/>/g, "&gt;")
          .replace(/"/g, "&quot;");
      }

      // ---- Render Repo Card ----
      function renderRepoCard(repo, rank) {
        const langColor = repo.language
          ? LANG_COLORS[repo.language] || "#8b8b8b"
          : null;
        const topics = (repo.topics || []).slice(0, 5);
        return `
    <a href="${escapeHtml(repo.html_url)}" target="_blank" rel="noopener noreferrer" class="repo-card">
      <div class="repo-rank">${rank}</div>
      <div class="repo-body">
        <div class="repo-top">
          <div class="repo-name-row">
            <img src="${escapeHtml(repo.owner.avatar_url)}" alt="${escapeHtml(repo.owner.login)}'s avatar" class="repo-avatar" crossorigin="anonymous" />
            <span class="repo-name">${escapeHtml(repo.full_name)}</span>
          </div>
          <span class="repo-external">${getIcon("icon-external")}</span>
        </div>
        ${repo.description ? `<p class="repo-desc">${escapeHtml(repo.description)}</p>` : ""}
        <div class="repo-stats">
          ${langColor ? `<span class="repo-stat"><span class="lang-dot" style="background:${langColor}"></span>${escapeHtml(repo.language)}</span>` : ""}
          <span class="repo-stat">${getIcon("icon-star")}${formatNum(repo.stargazers_count)}</span>
          <span class="repo-stat">${getIcon("icon-fork")}${formatNum(repo.forks_count)}</span>
          <span class="repo-stat">${getIcon("icon-eye")}${formatNum(repo.watchers_count)}</span>
        </div>
        ${topics.length ? `<div class="repo-topics">${topics.map((t) => `<span class="topic-tag">${escapeHtml(t)}</span>`).join("")}</div>` : ""}
      </div>
    </a>
  `;
      }

      function renderSkeletons(count) {
        let html = "";
        for (let i = 0; i < count; i++) {
          html += `
      <div class="skeleton-card">
        <div class="skeleton skeleton-rank" style="width:2rem;height:2rem;"></div>
        <div class="skeleton-body">
          <div class="skeleton" style="height:1.25rem;width:12rem;"></div>
          <div class="skeleton" style="height:1rem;width:100%;"></div>
          <div style="display:flex;gap:0.75rem;">
            <div class="skeleton" style="height:1rem;width:4rem;"></div>
            <div class="skeleton" style="height:1rem;width:3rem;"></div>
            <div class="skeleton" style="height:1rem;width:3rem;"></div>
          </div>
        </div>
      </div>`;
        }
        return html;
      }

      function renderPagination(page, hasMore, onPrev, onNext) {
        return `
    <div class="pagination">
      <button class="page-btn" id="prev-btn" ${page <= 1 ? "disabled" : ""}>
        ${getIcon("icon-chevron-left")} Previous
      </button>
      <span class="page-info">Page ${page}</span>
      <button class="page-btn" id="next-btn" ${!hasMore ? "disabled" : ""}>
        Next ${getIcon("icon-chevron-right")}
      </button>
    </div>`;
      }

      // ---- State ----
      let trendingState = {
        range: "daily",
        language: "",
        page: 1,
        data: null,
        loading: false,
        error: false,
      };
      let searchState = {
        query: "",
        submitted: "",
        language: "",
        sort: "stars",
        page: 1,
        data: null,
        loading: false,
        error: false,
      };

      // ---- API Calls ----
      async function fetchTrending() {
        trendingState.loading = true;
        trendingState.error = false;
        renderTrendingPage();

        const dateSince = getDateSince(trendingState.range);
        let q = `created:>${dateSince}`;
        if (trendingState.language) q += ` language:${trendingState.language}`;
        const url = `https://api.github.com/search/repositories?q=${encodeURIComponent(q)}&sort=stars&order=desc&per_page=25&page=${trendingState.page}`;

        try {
          const res = await fetch(url, {
            headers: {
              Accept: "application/vnd.github.v3+json",
              "User-Agent": "GitTrends-App",
            },
          });
          if (!res.ok) throw new Error("API error");
          trendingState.data = await res.json();
          trendingState.error = false;
        } catch {
          trendingState.error = true;
          trendingState.data = null;
        }
        trendingState.loading = false;
        renderTrendingPage();
      }

      async function fetchSearch() {
        if (!searchState.submitted) return;
        searchState.loading = true;
        searchState.error = false;
        renderSearchPage();

        let q = searchState.submitted;
        if (searchState.language) q += ` language:${searchState.language}`;
        const url = `https://api.github.com/search/repositories?q=${encodeURIComponent(q)}&sort=${searchState.sort}&order=desc&per_page=25&page=${searchState.page}`;

        try {
          const res = await fetch(url, {
            headers: {
              Accept: "application/vnd.github.v3+json",
              "User-Agent": "GitTrends-App",
            },
          });
          if (!res.ok) throw new Error("API error");
          searchState.data = await res.json();
          searchState.error = false;
        } catch {
          searchState.error = true;
          searchState.data = null;
        }
        searchState.loading = false;
        renderSearchPage();
      }

      // ---- Page Renderers ----
      function renderTrendingPage() {
        const app = document.getElementById("app");
        const s = trendingState;
        const repos = s.data?.items || [];
        const total = s.data?.total_count || 0;

        const ranges = [
          {
            value: "daily",
            label: "Today",
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0011 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 11-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 002.5 2.5z"/></svg>',
          },
          {
            value: "weekly",
            label: "This Week",
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>',
          },
          {
            value: "monthly",
            label: "This Month",
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>',
          },
        ];

        let html = `<div class="container">
    <div class="page-header">
      <div class="page-header-row">
        <div class="page-icon primary">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
        </div>
        <h1 class="page-title">Trending Repositories</h1>
      </div>
      <p class="page-subtitle">Discover the most popular open-source projects on GitHub right now.</p>
    </div>

    <div style="display:flex;flex-direction:column;gap:1.5rem;">
      <div class="controls-row">
        <div class="tab-group">
          ${ranges.map((r) => `<button class="tab-btn ${s.range === r.value ? "active" : ""}" data-range="${r.value}">${r.icon}${r.label}</button>`).join("")}
        </div>
        <select class="select" id="trending-lang">${languageOptions()}</select>
      </div>`;

        if (s.error) {
          html += `<div class="error-banner">${getIcon("icon-alert")}<span>Failed to load trending repositories. Please try again later.</span></div>`;
        }

        if (!s.error && !s.loading && total > 0) {
          html += `<p class="status-text">Showing ${repos.length} of ${total.toLocaleString()} repositories</p>`;
        }

        html += `<div class="repo-list" id="trending-list">`;
        if (s.loading) {
          html += renderSkeletons(10);
        } else {
          repos.forEach((repo, i) => {
            html += renderRepoCard(repo, (s.page - 1) * 25 + i + 1);
          });
        }
        html += `</div>`;

        if (!s.loading && repos.length > 0) {
          html += renderPagination(s.page, repos.length >= 25);
        }

        if (!s.loading && repos.length === 0 && !s.error) {
          html += `<div class="empty-state">
      <p class="empty-title">No repositories found</p>
      <p class="empty-desc">Try changing the time range or language filter.</p>
    </div>`;
        }

        html += `</div></div>`;
        app.innerHTML = html;

        // Bind events
        document.querySelectorAll("[data-range]").forEach((btn) => {
          btn.addEventListener("click", () => {
            trendingState.range = btn.dataset.range;
            trendingState.page = 1;
            fetchTrending();
          });
        });

        const langSelect = document.getElementById("trending-lang");
        if (langSelect) {
          langSelect.value = s.language;
          langSelect.addEventListener("change", () => {
            trendingState.language = langSelect.value;
            trendingState.page = 1;
            fetchTrending();
          });
        }

        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        if (prevBtn)
          prevBtn.addEventListener("click", () => {
            trendingState.page = Math.max(1, s.page - 1);
            fetchTrending();
          });
        if (nextBtn)
          nextBtn.addEventListener("click", () => {
            trendingState.page = s.page + 1;
            fetchTrending();
          });
      }

      function renderSearchPage() {
        const app = document.getElementById("app");
        const s = searchState;
        const repos = s.data?.items || [];
        const total = s.data?.total_count || 0;

        let html = `<div class="container">
    <div class="page-header">
      <div class="page-header-row">
        <div class="page-icon accent">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        </div>
        <h1 class="page-title">Search Repositories</h1>
      </div>
      <p class="page-subtitle">Search across millions of GitHub repositories by name, topic, or language.</p>
    </div>

    <div style="display:flex;flex-direction:column;gap:1.5rem;">
      <form class="search-form" id="search-form">
        <div class="search-input-row">
          <div class="search-input-wrap">
            <span class="search-input-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></span>
            <input type="text" class="search-input" id="search-query" placeholder="Search repositories..." value="${escapeHtml(s.query)}" />
          </div>
          <button type="submit" class="search-submit">Search</button>
        </div>
        <div class="search-filters">
          <select class="select" id="search-lang">${languageOptions()}</select>
          <select class="select" id="search-sort">${SORT_OPTIONS.map((o) => `<option value="${o.value}">Sort: ${o.label}</option>`).join("")}</select>
        </div>
      </form>`;

        if (s.error) {
          html += `<div class="error-banner">${getIcon("icon-alert")}<span>Failed to search repositories. Please try again later.</span></div>`;
        }

        if (s.submitted && !s.error && !s.loading && total > 0) {
          html += `<p class="status-text">Found ${total.toLocaleString()} repositories for <span style="font-weight:500;color:var(--fg)">"${escapeHtml(s.submitted)}"</span></p>`;
        }

        html += `<div class="repo-list" id="search-list">`;
        if (s.loading) {
          html += renderSkeletons(8);
        } else {
          repos.forEach((repo, i) => {
            html += renderRepoCard(repo, (s.page - 1) * 25 + i + 1);
          });
        }
        html += `</div>`;

        if (!s.loading && repos.length > 0) {
          html += renderPagination(s.page, repos.length >= 25);
        }

        if (!s.submitted) {
          html += `<div class="empty-state">
      <div class="empty-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg></div>
      <p class="empty-title">Start exploring</p>
      <p class="empty-desc">Search for repositories by name, description, or topic. Filter by language and sort by stars, forks, or recent updates.</p>
    </div>`;
        }

        if (s.submitted && !s.loading && repos.length === 0 && !s.error) {
          html += `<div class="empty-state">
      <p class="empty-title">No results found</p>
      <p class="empty-desc">Try different keywords or adjust your filters.</p>
    </div>`;
        }

        html += `</div></div>`;
        app.innerHTML = html;

        // Bind events
        const form = document.getElementById("search-form");
        const queryInput = document.getElementById("search-query");
        const langSelect = document.getElementById("search-lang");
        const sortSelect = document.getElementById("search-sort");

        if (langSelect) langSelect.value = s.language;
        if (sortSelect) sortSelect.value = s.sort;

        if (queryInput) {
          queryInput.addEventListener("input", (e) => {
            searchState.query = e.target.value;
          });
        }

        if (form) {
          form.addEventListener("submit", (e) => {
            e.preventDefault();
            if (searchState.query.trim()) {
              searchState.submitted = searchState.query.trim();
              searchState.page = 1;
              fetchSearch();
            }
          });
        }

        if (langSelect) {
          langSelect.addEventListener("change", () => {
            searchState.language = langSelect.value;
            searchState.page = 1;
            if (searchState.submitted) fetchSearch();
          });
        }

        if (sortSelect) {
          sortSelect.addEventListener("change", () => {
            searchState.sort = sortSelect.value;
            searchState.page = 1;
            if (searchState.submitted) fetchSearch();
          });
        }

        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        if (prevBtn)
          prevBtn.addEventListener("click", () => {
            searchState.page = Math.max(1, s.page - 1);
            fetchSearch();
          });
        if (nextBtn)
          nextBtn.addEventListener("click", () => {
            searchState.page = s.page + 1;
            fetchSearch();
          });
      }

      function renderAboutPage() {
        const app = document.getElementById("app");
        const features = [
          {
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>',
            title: "Trending Discovery",
            desc: "Browse the hottest repositories across daily, weekly, and monthly timeframes to stay on top of what the community is building.",
          },
          {
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>',
            title: "Powerful Search",
            desc: "Search across millions of GitHub repositories with advanced filters for language, sort order, and more.",
          },
          {
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>',
            title: "Language Filtering",
            desc: "Filter trending and search results by programming language to find projects in your tech stack.",
          },
          {
            icon: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>',
            title: "Real-Time Data",
            desc: "All data is fetched directly from the GitHub API, ensuring you always see the latest trending projects.",
          },
        ];

        app.innerHTML = `<div class="container-narrow">
    <div class="page-header">
      <div class="page-header-row">
        <div class="page-icon primary">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" y1="16" x2="12" y2="12"/><line x1="12" y1="8" x2="12.01" y2="8"/></svg>
        </div>
        <h1 class="page-title">About GitTrends</h1>
      </div>
      <p class="page-subtitle">Discover what the developer community is building.</p>
    </div>
    <div class="content-sections">
      <div class="content-section">
        <p class="section-text">GitTrends is a free, open-source tool that helps developers discover trending repositories on GitHub. Whether you are looking for inspiration, staying up to date with the latest tools, or exploring new programming languages, GitTrends makes it easy to find what is popular in the open-source world.</p>
      </div>
      <div class="content-section">
        <h2 class="section-title">Features</h2>
        <div class="feature-grid">
          ${features
            .map(
              (f) => `
            <div class="feature-card">
              <div class="feature-card-header">${f.icon}<h3 class="feature-card-title">${f.title}</h3></div>
              <p class="feature-card-desc">${f.desc}</p>
            </div>`,
            )
            .join("")}
        </div>
      </div>
      <div class="content-section">
        <h2 class="section-title">How It Works</h2>
        <p class="section-text">GitTrends uses the public GitHub Search API to find repositories created or updated within specific time ranges, sorted by popularity. The daily view shows repos created in the last 24 hours, weekly covers the past 7 days, and monthly spans the last 30 days.</p>
      </div>
      <div class="content-section">
        <h2 class="section-title">Disclaimer</h2>
        <p class="section-text">GitTrends is not affiliated with, endorsed by, or sponsored by GitHub, Inc. All repository data is publicly available through the GitHub API. GitHub and the GitHub logo are trademarks of GitHub, Inc.</p>
      </div>
    </div>
  </div>`;
      }

      function renderPrivacyPage() {
        const app = document.getElementById("app");
        const sections = [
          {
            title: "Information We Collect",
            text: "GitTrends is a client-side application that does not collect, store, or process any personal information. We do not require user accounts, and we do not track individual users.",
          },
          {
            title: "GitHub API Usage",
            text: "GitTrends uses the public GitHub REST API to fetch repository data. All data displayed on this site is publicly available through the GitHub API. We do not modify, store, or cache any personal user data from GitHub beyond temporary browser-level caching for performance.",
          },
          {
            title: "Cookies",
            text: "GitTrends does not use cookies or any form of local storage to track user behavior. Your preferences such as time range and language filters are stored only in the current session state and are not persisted.",
          },
          {
            title: "Third-Party Services",
            text: "Our application may be hosted on platforms that collect standard web server logs (IP addresses, browser type, pages visited) for operational purposes. These logs are handled by the hosting provider's privacy policy.",
          },
          {
            title: "Changes to This Policy",
            text: "We may update this privacy policy from time to time. Any changes will be reflected on this page with an updated revision date.",
          },
          {
            title: "Contact",
            text: "If you have any questions about this privacy policy, please open an issue on our GitHub repository.",
          },
        ];

        app.innerHTML = `<div class="container-narrow">
    <div class="page-header">
      <div class="page-header-row">
        <div class="page-icon accent">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
        </div>
        <h1 class="page-title">Privacy Policy</h1>
      </div>
      <p class="small-date">Last updated: February 6, 2026</p>
    </div>
    <div class="content-sections">
      ${sections
        .map(
          (s) => `
        <div class="content-section">
          <h2 class="section-title">${s.title}</h2>
          <p class="section-text">${s.text}</p>
        </div>`,
        )
        .join("")}
    </div>
  </div>`;
      }

      // ---- Router ----
      function getRoute() {
        const hash = window.location.hash || "/";
        return hash.replace(/^/, "") || "/";
      }

      function updateNav(route) {
        document.querySelectorAll("[data-nav]").forEach((link) => {
          const navId = link.dataset.nav;
          let isActive = false;
          if (navId === "trending" && (route === "/" || route === ""))
            isActive = true;
          else if (navId === "search" && route.startsWith("/search"))
            isActive = true;
          else if (navId === "about" && route.startsWith("/about"))
            isActive = true;
          else if (navId === "privacy" && route.startsWith("/privacy"))
            isActive = true;
          link.classList.toggle("active", isActive);
        });
      }

      function navigate() {
        const route = getRoute();
        updateNav(route);
        window.scrollTo(0, 0);

        if (route === "/" || route === "") {
          renderTrendingPage();
          if (!trendingState.data && !trendingState.loading) fetchTrending();
        } else if (route.startsWith("/search")) {
          renderSearchPage();
        } else if (route.startsWith("/about")) {
          renderAboutPage();
        } else if (route.startsWith("/privacy")) {
          renderPrivacyPage();
        } else {
          render404Page();
        }
      }

      // ---- Mobile Nav ----
      function closeMobile() {
        document.getElementById("mobile-nav").classList.remove("open");
        document.getElementById("menu-icon").classList.remove("hidden");
        document.getElementById("close-icon").classList.add("hidden");
      }

      document.getElementById("mobile-toggle").addEventListener("click", () => {
        const nav = document.getElementById("mobile-nav");
        const open = nav.classList.toggle("open");
        document.getElementById("menu-icon").classList.toggle("hidden", open);
        document.getElementById("close-icon").classList.toggle("hidden", !open);
      });

      // ---- Init ----
      window.addEventListener("hashchange", navigate);
      navigate();
    </script>
  </body>
</html>
